<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.5/dist/mindar-image.prod.js"></script>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.5/dist/mindar-image-aframe.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <title>30D Studio</title>
  <style>
    .panel {
      position: fixed;
      bottom: 0;
      height: 30px;
      z-index: 9999;
      background: white;
      color: black;
      font-size: 24px;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>
  <script>  
    // Get event data  
    function deviceOrientationListener(event) {  
      var alpha    = event.alpha; //z axis rotation \[0,360)  
      var beta     = event.beta; //x axis rotation \[-180, 180\]  
      var gamma    = event.gamma; //y axis rotation \[-90, 90\]

      //Check if absolute values have been sent  
      if (typeof event.webkitCompassHeading !== "undefined") {  
        alpha = event.webkitCompassHeading; //iOS non-standard  
        var heading = alpha  
        document.getElementById("heading").innerHTML = heading;
        console.log("Heading: ", heading);  
      }  
      else {  
        alert("Your device is reporting relative alpha values, so this compass won't point north :(");  
        var heading = 360 - alpha; //heading \[0, 360)  
        document.getElementById("heading").innerHTML = heading;
        console.log("Heading: ", heading);  
      }  
        
      // Change backgroud colour based on heading  
      // Green for North and South, black otherwise  
      if (heading > 359 || heading < 1) { //Allow +- 1 degree  
        document.body.style.backgroundColor = "green";  
        document.getElementById("heading").innerHTML = "N"; // North 
        console.log("Heading: N", heading); 
      }  
      else if (heading > 179 && heading < 181){ //Allow +- 1 degree  
        document.body.style.backgroundColor = "green";  
        document.getElementById("heading").innerHTML = "S"; // South
        console.log("Heading: S", heading); 
      }   
      else { // Otherwise, use near black  
        document.body.style.backgroundColor = "#161616";  
      }  
    }  
      
    // Check if device can provide absolute orientation data  
    if (window.DeviceOrientationAbsoluteEvent) {  
      window.addEventListener("DeviceOrientationAbsoluteEvent", deviceOrientationListener);  
    } // If not, check if the device sends any orientation data  
    else if(window.DeviceOrientationEvent){  
      window.addEventListener("deviceorientation", deviceOrientationListener);  
    } // Send an alert if the device isn't compatible  
    else {  
      alert("Sorry, try again on a compatible mobile device!");  
    }  
    </script> 
    <h1>Testing heading</h1>
    <h2 id="heading" style="text-align:center"></h2>
</body>
</html>